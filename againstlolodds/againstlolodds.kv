#:kivy 1.10.1

<Title@Label>:
    font_size: '30sp'

<AttrLabel>:
    font_size: '15sp'

<Role>:
    image: image
    background_normal: ''
    background_color: .1, .1, .1, 1
    Image:
        id: image
        allow_stretch: True
        size_hint: None, None
        size: root.size
        pos: root.pos
        source: str(root.files['unknown'])


<Player>:
    session: None
    size_hint_y: None
    height: '50sp'

    champion: ''
    name: ''
    role: ''

    on_champion: 
        display.champion.text = self.champion
        
    on_name: display.name.text = self.name.center(40, '-')
    on_role: display.role.name = self.role
    BoxLayout:
        id: display
        orientation: 'vertical'
        role: role
        name: name
        champion: champion
        Label:
            id: name
            color: (207 / 255, 181 / 255, 59 / 255, 1)
            font_size: '15sp'
        BoxLayout:
            Label:
                id: champion
                font_size: '20sp'
            Role:
                id: role
                size_hint_x: .3


<Header>:
    font_size: '20sp'

<PlayerList>:
    name: ""
    orientation: 'vertical'
    team: team

    Title:
        text: root.name
        font_size: '30sp'
        size_hint_y: .3
    AnchorLayout:
        canvas:
            Color:
                rgba: .8, .8, .8, .8
            Rectangle:
                pos: self.pos
                size: self.size

        StackLayout:
            size_hint: .98, .98
            orientation: 'tb-lr'
            id: team
            canvas:
                Color:
                    rgba: .01, .01, .01, 1
                Rectangle:
                    pos: self.pos
                    size: self.size


<Result>:
    size_hint_y: .5
    val: 100
    Label:
        text: 'Prediction: {}%'.format(root.val)
        font_size: '30sp'


<MainPage>:
    session: app.session
    name: 'main'

    on_session: self.begin()
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            PlayerList:
                session: root.session
                id: team
                name: 'Team'
            PlayerList:
                session: root.session
                id: enemy
                name: 'Enemy'
        
        BoxLayout:
            size_hint_y: .2
            AnchorLayout:
                Button:
                    text: 'Calculate'
                    size_hint: .4, .6
                    on_release: result.val = root.session.calculate(team.members, enemy.members)
            AnchorLayout:
                anchor_x: 'right'    
                Result:
                    id: result


<LoadingPage>:
    name: 'loading'
    BoxLayout:
        orientation: 'vertical'
        Image:
            source: str(root.resdir / 'loading.zip')
            anim_delay: 1 / 30
        Title:
            text: 'Waiting for selection phase to begin...'


<ManagerPage>:
    orientation: 'vertical'
    Title:
        text: "Against LoL Odds"
        font_size: '40sp'
        size_hint_y: None
        color: (.6, .6, .6, 1)
        height: '60sp'
    Manager:


<Manager>:
    LoadingPage:
    MainPage:
        session: app.session
